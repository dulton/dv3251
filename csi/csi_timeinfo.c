/******************** (C) COPYRIGHT 2013 BUILDWIN ************************
* File Name          : csi_timeinfo.c
* Author             : pengtao_zhang
* Version            : V0904a
* Date               : 09/04/2013
* Description        : This file provides all the csi time info firmware functions.
***************************************************************************/
//===================================================================
//                                                     	            |
//                       INCLUDE FILES                              |
//                                                                  |
//===================================================================
#include "../header/include.h"

//===================================================================
//                                                     	            |
//                      GLOBAL VARIABLE                             |
//                                                                  |
//===================================================================
//u32 TimerInfoPixelBuf[TIME_W*TIME_H/32];  //store curent timerinfo Pixel
u32 *TimerInfoPixelBuf;
u8  TimeInfoBuff[TIME_INFO_LEN];   
u8  TimeInfoCurrent[TIME_INFO_LEN];    //store curent timerinfo
u32 lastTimeCount;

//
u8 CSI_FONT_ZERO[FONT_LEN] =
{	
	0x00,0x00,0x00,0x00,0x00,0x07,0xE0,0x00,0x00,0x1F,0xFC,0x00,0x00,0x3F,0xFE,0x00,
	0x00,0x7F,0x3F,0x00,0x00,0xFC,0x1F,0x00,0x00,0xF8,0x0F,0x80,0x01,0xF8,0x0F,0x80,
	0x01,0xF0,0x07,0xC0,0x01,0xF0,0x07,0xC0,0x01,0xF0,0x07,0xC0,0x01,0xF0,0x07,0xC0,
	0x01,0xF0,0x07,0xC0,0x01,0xF0,0x03,0xC0,0x01,0xF0,0x03,0xC0,0x01,0xF0,0x03,0xC0,
	0x01,0xF0,0x07,0xC0,0x01,0xF0,0x07,0xC0,0x01,0xF0,0x03,0xC0,0x01,0xF0,0x03,0xC0,
	0x01,0xF0,0x03,0xC0,0x01,0xF0,0x03,0xC0,0x01,0xF0,0x03,0xC0,0x01,0xF0,0x03,0xC0,
	0x01,0xF0,0x07,0xC0,0x01,0xF0,0x07,0xC0,0x00,0xF8,0x07,0x80,0x00,0xF8,0x0F,0x80,
	0x00,0x7C,0x0F,0x00,0x00,0x7F,0x3F,0x00,0x00,0x3F,0xFE,0x00,0x00,0x0F,0xF8,0x00,
};

u8 CSI_FONT_ONE[FONT_LEN] =
{
	0x00,0x00,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,
	0x00,0xF8,0x00,0x00,0x00,0xFC,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0xFF,0xF8,0x00,
	0x00,0xFF,0xF8,0x00,0x00,0xFF,0xF8,0x00,0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,
	0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,
	0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,
	0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,
	0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,
	0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,
};

u8 CSI_FONT_TWO[FONT_LEN] =
{	
	0x00,0x00,0x00,0x00,0x00,0x03,0xF0,0x00,0x00,0x1F,0xFC,0x00,0x00,0x3F,0xFF,0x00,
	0x00,0x7F,0x3F,0x80,0x00,0xFC,0x0F,0x80,0x00,0xF8,0x0F,0xC0,0x01,0xF0,0x07,0xC0,
	0x01,0xF0,0x07,0xC0,0x01,0xF0,0x07,0xC0,0x01,0xF0,0x07,0xC0,0x01,0xF0,0x07,0xC0,
	0x01,0xF0,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0x7C,0x00,0x00,
	0x00,0x3E,0x00,0x00,0x00,0x3F,0x80,0x00,0x00,0x0F,0xC0,0x00,0x00,0x07,0xE0,0x00,
	0x00,0x03,0xF0,0x00,0x00,0x01,0xF8,0x00,0x00,0x00,0xFC,0x00,0x00,0x00,0x3F,0x00,
	0x00,0x00,0x1F,0x00,0x00,0x00,0x0F,0x80,0x00,0x00,0x07,0x80,0x00,0x00,0x07,0xC0,
	0x00,0x00,0x07,0xC0,0x01,0xFF,0xFF,0xC0,0x01,0xFF,0xFF,0xC0,0x01,0xFF,0xFF,0xC0,
};

u8 CSI_FONT_THREE[FONT_LEN] =
{	
	0x00,0x00,0x00,0x00,0x00,0x07,0xC0,0x00,0x00,0x3F,0xF8,0x00,0x00,0x7F,0xFE,0x00,
	0x00,0xFC,0x7E,0x00,0x01,0xF8,0x1F,0x00,0x01,0xF0,0x0F,0x00,0x01,0xF0,0x0F,0x80,
	0x01,0xE0,0x0F,0x80,0x01,0xE0,0x0F,0x80,0x01,0xE0,0x00,0x00,0x01,0xF0,0x00,0x00,
	0x01,0xF0,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0x7E,0x00,0x00,0x00,0x3F,0xE0,0x00,
	0x00,0x7F,0xE0,0x00,0x00,0xFF,0xE0,0x00,0x01,0xF8,0x00,0x00,0x03,0xF0,0x00,0x00,
	0x03,0xE0,0x00,0x00,0x03,0xE0,0x00,0x00,0x03,0xC0,0x00,0x00,0x03,0xC0,0x07,0x80,
	0x03,0xC0,0x07,0x80,0x03,0xE0,0x07,0x80,0x03,0xE0,0x0F,0x80,0x01,0xE0,0x0F,0x80,
	0x01,0xF0,0x1F,0x00,0x00,0xFE,0xFF,0x00,0x00,0x7F,0xFE,0x00,0x00,0x1F,0xF8,0x00,
	
};

u8 CSI_FONT_FOUR[FONT_LEN] =
{	
	0x00,0x00,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0xFC,0x00,0x00,0x00,0xFC,0x00,0x00,
	0x00,0xFE,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0xFF,0x80,0x00,
	0x00,0xFB,0xC0,0x00,0x00,0xFB,0xC0,0x00,0x00,0xF9,0xE0,0x00,0x00,0xF9,0xF0,0x00,
	0x00,0xF8,0xF0,0x00,0x00,0xF8,0x78,0x00,0x00,0xF8,0x78,0x00,0x00,0xF8,0x3C,0x00,
	0x00,0xF8,0x1E,0x00,0x00,0xF8,0x1E,0x00,0x00,0xF8,0x0F,0x00,0x00,0xF8,0x07,0x80,
	0x00,0xF8,0x07,0x80,0x07,0xFF,0xFF,0xC0,0x07,0xFF,0xFF,0xC0,0x07,0xFF,0xFF,0xC0,
	0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,
	0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,	
};

u8 CSI_FONT_FIVE[FONT_LEN] =
{	
	0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0xFF,0xFF,0x00,0x00,0xFF,0xFF,0x00,
	0x00,0x00,0x0F,0x00,0x00,0x00,0x0F,0x00,0x00,0x00,0x0F,0x00,0x00,0x00,0x0F,0x00,
	0x00,0x00,0x0F,0x80,0x00,0x00,0x0F,0x80,0x00,0x00,0x07,0x80,0x00,0x0F,0xF7,0x80,
	0x00,0x3F,0xFF,0x80,0x00,0x7F,0xFF,0x80,0x00,0xFE,0x1F,0x80,0x00,0xF8,0x0F,0x80,
	0x01,0xF8,0x07,0xC0,0x01,0xF0,0x00,0x00,0x01,0xF0,0x00,0x00,0x01,0xF0,0x00,0x00,
	0x01,0xF0,0x00,0x00,0x01,0xF0,0x00,0x00,0x01,0xF0,0x00,0x00,0x01,0xF0,0x07,0xC0,
	0x01,0xF0,0x07,0xC0,0x00,0xF8,0x07,0xC0,0x00,0xF8,0x07,0xC0,0x00,0x7C,0x0F,0x80,
	0x00,0x7F,0x3F,0x80,0x00,0x3F,0xFF,0x00,0x00,0x0F,0xFC,0x00,0x00,0x00,0x00,0x00,	
};

u8 CSI_FONT_SIX[FONT_LEN] =
{	
	0x00,0x00,0x00,0x00,0x00,0x07,0xE0,0x00,0x00,0x1F,0xF8,0x00,0x00,0x7F,0xFE,0x00,
	0x00,0x7E,0x7F,0x00,0x00,0xF8,0x1F,0x00,0x00,0xF8,0x0F,0x80,0x01,0xF0,0x0F,0x80,
	0x01,0xF0,0x07,0xC0,0x00,0x00,0x07,0xC0,0x00,0x00,0x07,0xC0,0x00,0x00,0x07,0xC0,
	0x00,0x03,0x87,0xC0,0x00,0x1F,0xF3,0xC0,0x00,0x7F,0xFB,0xE0,0x00,0xFF,0xFF,0xE0,
	0x00,0xFC,0x1F,0xE0,0x01,0xF8,0x0F,0xE0,0x01,0xF0,0x07,0xE0,0x01,0xF0,0x07,0xE0,
	0x01,0xF0,0x07,0xE0,0x03,0xE0,0x07,0xC0,0x01,0xE0,0x07,0xC0,0x01,0xF0,0x07,0xC0,
	0x01,0xF0,0x07,0xC0,0x01,0xF0,0x07,0xC0,0x01,0xF0,0x07,0xC0,0x00,0xF8,0x0F,0x80,
	0x00,0xFC,0x1F,0x80,0x00,0x7F,0x7F,0x00,0x00,0x3F,0xFE,0x00,0x00,0x0F,0xF8,0x00,
	
};

u8 CSI_FONT_SEVEN[FONT_LEN] =
{	
	0x00,0x00,0x00,0x00,0x03,0xFF,0xFF,0xE0,0x03,0xFF,0xFF,0xE0,0x03,0xFF,0xFF,0xE0,
	0x01,0xE0,0x00,0x00,0x00,0xF0,0x00,0x00,0x00,0x78,0x00,0x00,0x00,0x7C,0x00,0x00,
	0x00,0x3C,0x00,0x00,0x00,0x1E,0x00,0x00,0x00,0x1F,0x00,0x00,0x00,0x0F,0x00,0x00,
	0x00,0x0F,0x80,0x00,0x00,0x07,0x80,0x00,0x00,0x07,0xC0,0x00,0x00,0x03,0xC0,0x00,
	0x00,0x03,0xE0,0x00,0x00,0x01,0xE0,0x00,0x00,0x01,0xF0,0x00,0x00,0x01,0xF0,0x00,
	0x00,0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0x7C,0x00,
	0x00,0x00,0x7C,0x00,0x00,0x00,0x7C,0x00,0x00,0x00,0x7C,0x00,0x00,0x00,0x7E,0x00,
	0x00,0x00,0x3E,0x00,0x00,0x00,0x3E,0x00,0x00,0x00,0x3E,0x00,0x00,0x00,0x00,0x00,
	
};

u8 CSI_FONT_EIGHT[FONT_LEN] =
{	
	0x00,0x00,0x00,0x00,0x00,0x07,0xE0,0x00,0x00,0x1F,0xFC,0x00,0x00,0x3F,0xFE,0x00,
	0x00,0x7E,0x3F,0x00,0x00,0xFC,0x1F,0x80,0x00,0xF8,0x0F,0x80,0x00,0xF8,0x0F,0x80,
	0x00,0xF8,0x0F,0x80,0x00,0xF8,0x0F,0x80,0x00,0xF8,0x0F,0x80,0x00,0xF8,0x0F,0x80,
	0x00,0xF8,0x1F,0x80,0x00,0x7C,0x3F,0x00,0x00,0x3F,0xFE,0x00,0x00,0x07,0xF0,0x00,
	0x00,0x3F,0xFE,0x00,0x00,0x7E,0x3F,0x00,0x00,0xF8,0x0F,0x80,0x01,0xF0,0x07,0xC0,
	0x01,0xF0,0x07,0xC0,0x01,0xF0,0x07,0xC0,0x01,0xF0,0x07,0xC0,0x01,0xF0,0x07,0xC0,
	0x01,0xF0,0x07,0xC0,0x01,0xF0,0x07,0xC0,0x01,0xF0,0x07,0xC0,0x00,0xF8,0x0F,0xC0,
	0x00,0xFC,0x0F,0x80,0x00,0x7F,0x7F,0x00,0x00,0x3F,0xFE,0x00,0x00,0x0F,0xF8,0x00,	
};

u8 CSI_FONT_NINE[FONT_LEN] =
{
	0x00,0x00,0x00,0x00,0x00,0x03,0xE0,0x00,0x00,0x1F,0xFC,0x00,0x00,0x3F,0xFE,0x00,
	0x00,0x7F,0x3F,0x00,0x00,0xFC,0x0F,0x80,0x00,0xF8,0x07,0x80,0x01,0xF0,0x07,0xC0,
	0x01,0xF0,0x07,0xC0,0x01,0xF0,0x07,0xC0,0x01,0xF0,0x03,0xC0,0x01,0xF0,0x03,0xE0,
	0x01,0xF0,0x03,0xE0,0x03,0xF0,0x07,0xC0,0x03,0xF0,0x07,0xC0,0x03,0xF0,0x07,0xC0,
	0x03,0xF8,0x0F,0xC0,0x03,0xFC,0x1F,0x80,0x03,0xFF,0xFF,0x80,0x01,0xEF,0xFF,0x00,
	0x01,0xF7,0xFC,0x00,0x01,0xF0,0x00,0x00,0x01,0xF0,0x00,0x00,0x01,0xF0,0x00,0x00,
	0x01,0xF0,0x00,0x00,0x00,0xF8,0x07,0xC0,0x00,0xF8,0x07,0xC0,0x00,0xFC,0x0F,0x80,
	0x00,0x7C,0x0F,0x80,0x00,0x3F,0x7F,0x00,0x00,0x1F,0xFE,0x00,0x00,0x07,0xFC,0x00,

};

u8 CSI_FONT_COLON[FONT_LEN] =
{
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x07,0xF8,0x00,0x00,0x07,0xF8,0x00,0x00,0x07,0xF8,0x00,0x00,0x07,0xF8,0x00,
	0x00,0x07,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x07,0xF8,0x00,0x00,0x07,0xF8,0x00,0x00,0x07,0xF8,0x00,0x00,0x07,0xF8,0x00,
	0x00,0x07,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

};

u8 CSI_FONT_SLASH[FONT_LEN] =
{
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0F,0x00,0x00,0x00,0x07,0x80,0x00,0x00,
	0x03,0x80,0x00,0x00,0x03,0xC0,0x00,0x00,0x01,0xE0,0x00,0x00,0x00,0xE0,0x00,0x00,
	0x00,0xF0,0x00,0x00,0x00,0x78,0x00,0x00,0x00,0x38,0x00,0x00,0x00,0x1C,0x00,0x00,
	0x00,0x1E,0x00,0x00,0x00,0x0F,0x00,0x00,0x00,0x07,0x00,0x00,0x00,0x07,0x80,0x00,
	0x00,0x03,0xC0,0x00,0x00,0x01,0xC0,0x00,0x00,0x01,0xE0,0x00,0x00,0x00,0xF0,0x00,
	0x00,0x00,0x70,0x00,0x00,0x00,0x78,0x00,0x00,0x00,0x3C,0x00,0x00,0x00,0x1C,0x00,
	0x00,0x00,0x1E,0x00,0x00,0x00,0x0F,0x00,0x00,0x00,0x07,0x00,0x00,0x00,0x07,0x80,
	0x00,0x00,0x03,0xC0,0x00,0x00,0x01,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

};

u8 CSI_FONT_HIFIN[FONT_LEN] =
{
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0xFF,0xFF,0xE0,
	0x03,0xFF,0xFF,0xE0,0x03,0xFF,0xFF,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,	
};

u8 CSI_FONT_NULL[FONT_LEN] =
{
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};

/*******************************************************************************
* Function Name  : csi_TimeInfo_Init
* Description    : set time information initial parameter
* Input          : None
* Output         : None
* Return         : None
*******************************************************************************/
void csi_TimeInfo_Init(void)
{
	TimerInfoPixelBuf = (u32 *)TIME_INFO_BUF;
	//deg_Printf("TimerInfoPixelBuf=%x\n",TimerInfoPixelBuf);
	my_memset(TimerInfoPixelBuf,0,TIME_W*TIME_H/8);
}

/*******************************************************************************
* Function Name  : csi_SetTimePos
* Description    : set time information position
* Input          : None
* Output         : None
* Return         : None
*******************************************************************************/
void csi_SetTimePos(void)
{
     REG32(CSI_TIME_POS) = ((((((u32)TimerInfoPixelBuf)>>27)&0xf) << 28) | (TIME_POS_X << 16) | TIME_POS_Y);
}

/*******************************************************************************
* Function Name  : csi_SetTimeInfo
* Description    : set time information
* Input          : None
* Output         : None
* Return         : None
*******************************************************************************/
void csi_SetTimeInfo(void)
{
	if(task_ctl.work_sta == TASK_RECORD_VIDEO)
		REG32(CSI_TIME_INFO) = ((((((u32)TimerInfoPixelBuf)>>20)&0x7f) << 25) | (sys_ctl.video_time_info_en << 24) | (TIME_INFO_Y << 16) | (TIME_INFO_U << 8) | (TIME_INFO_V));
	 else
		  REG32(CSI_TIME_INFO) = ((((((u32)TimerInfoPixelBuf)>>20)&0x7f) << 25) | (sys_ctl.picture_time_info_en<< 24) | (TIME_INFO_Y << 16) | (TIME_INFO_U << 8) | (TIME_INFO_V));
}

/*******************************************************************************
* Function Name  : csi_SetTimeInfoSize
* Description    : set time information  width and height
* Input          : None
* Output         : None
* Return         : None
*******************************************************************************/
void csi_SetTimeInfoSize(void)
{
	REG32(CSI_TIME_SIZE) = (((TIME_W) << 16) | (TIME_H));
}

/*******************************************************************************
* Function Name  : csi_SetTime
* Description    : set time
* Input          : None
* Output         : None
* Return         : None
*******************************************************************************/
void csi_SetTime(void)
{
   u32 i;
	//static u32 lastTimeCount = 1;
	for (i=0; i<TIME_INFO_LEN; i++)
	{
		TimeInfoBuff[i]=' ';   //clear TimeInfoBuff
	}


	u32 nowTimeCount = rtc_ReadCnt(RTC_READ_TIM);
	if (nowTimeCount == lastTimeCount)
	{
		return;
        }

	//my_memcpy(TimeInfoBuffTmp, "2013-08-31 /45:67 89", 20);
	//my_memcpy(TimeInfoBuffTmp, "2013-08-31 23:59:59 ", 19);
	CalcTimeInfo(TimeInfoCurrent);

	csi_SetTimeInfoRam(TimeInfoCurrent);
	if (lastTimeCount == 1)
	{
		csi_SetTimeInfoSize();
		csi_SetTimePos();
		csi_SetTimeInfo();
	}
	lastTimeCount = nowTimeCount;
}

/*******************************************************************************
* Function Name  : csi_SetTimeInfoRam
* Description    : set time information  to ram
* Input          : None
* Output         : None
* Return         : None
*******************************************************************************/
u8 csi_SetTimeInfoRam(u8 *p_TimeInfo) // TimeInfo, pass the u8 array, store the information needed to display, e.g. 00:00:00
{
     int i, j;
     u8 TimeInfoSet[TIME_INFO_LEN];
	 u32 *p_CSI_FONT_BUFF;
     for(i=0; i<TIME_INFO_LEN; i++)
     {
    	 TimeInfoSet[i] = p_TimeInfo[i];
     }
     for(i=0; i<TIME_INFO_LEN; i++)
	 {
		if(TimeInfoSet[i]!= TimeInfoBuff[i])
		{
			TimeInfoBuff[i] = TimeInfoSet[i];
			switch (TimeInfoSet[i])
			{
				case '0':	p_CSI_FONT_BUFF = (U32*)CSI_FONT_ZERO;
							break;
				case '1':	p_CSI_FONT_BUFF = (U32*)CSI_FONT_ONE;
							break;
				case '2':	p_CSI_FONT_BUFF = (U32*)CSI_FONT_TWO;
							break;
				case '3':	p_CSI_FONT_BUFF = (U32*)CSI_FONT_THREE;
							break;
				case '4':	p_CSI_FONT_BUFF = (U32*)CSI_FONT_FOUR;
							break;
				case '5':	p_CSI_FONT_BUFF = (U32*)CSI_FONT_FIVE;
							break;
				case '6':	p_CSI_FONT_BUFF = (U32*)CSI_FONT_SIX;
							break;
				case '7':	p_CSI_FONT_BUFF = (U32*)CSI_FONT_SEVEN;
							break;
				case '8':	p_CSI_FONT_BUFF = (U32*)CSI_FONT_EIGHT;
							break;
				case '9':	p_CSI_FONT_BUFF = (U32*)CSI_FONT_NINE;
							break;
				case ':':	p_CSI_FONT_BUFF = (U32*)CSI_FONT_COLON;
							break;
				case '/':	p_CSI_FONT_BUFF = (U32*)CSI_FONT_SLASH;
							break;
				case '-':	p_CSI_FONT_BUFF = (U32*)CSI_FONT_HIFIN;
							break;
				case ' ':	p_CSI_FONT_BUFF = (U32*)CSI_FONT_NULL;
							break;
				default:
					       p_CSI_FONT_BUFF = (U32*)CSI_FONT_NULL;
					       deg_Printf("TimeInfo character don't support!!!\n");
					       break;
			}
			for(j=0;j<TIME_H;j++)
			{
				TimerInfoPixelBuf[i+ (j * TIME_INFO_LEN)] = (((p_CSI_FONT_BUFF[j]>>0)&0xff)<<24)|(((p_CSI_FONT_BUFF[j]>>8)&0xff)<<16)|(((p_CSI_FONT_BUFF[j]>>16)&0xff)<<8)|(p_CSI_FONT_BUFF[j]>>24);
			}
			//TimerInfoPixelBuf[i+ (24 * TIME_INFO_LEN)] = 0;
			CleanDCacheRegion((u32)TimerInfoPixelBuf,128);
		}
	}
    return 1;
}

