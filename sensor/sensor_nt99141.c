/******************** (C) COPYRIGHT 2013 BUILDWIN ************************
* File Name          : sensor_nt99141.c
* Author             : pengtao_zhang
* Version            : V0826a
* Date               : 08/26/2013
* Description        : This file provides all the sensor nt99141 firmware functions.
***************************************************************************/
//===================================================================
//                                                     	            |
//                       INCLUDE FILES                              |
//                                                                  |
//===================================================================
#include "../header/include.h"

#if(SEN_USE == SEN_NT99141)
//===================================================================
//                                                     	            |
//                      GLOBAL VARIABLE                             |
//                                                                  |
//===================================================================


u8 NT99141InitTable_1280_720[][3] =
{
#if 0
//=======code 15~20fps good=====
	0x31,0x09,0x04,
	0x30,0x40,0x04,
	0x30,0x41,0x02,
	0x30,0x42,0xff,
	0x30,0x43,0x08,
	0x30,0x52,0xe0,
	0x30,0x53,0x0E,
	0x30,0x5f,0x33,
	0x31,0x00,0x07,
	0x31,0x06,0x03,
	0x31,0x05,0x01,
	0x31,0x08,0x05,
	0x31,0x10,0x22,
	0x31,0x11,0x57,
	0x31,0x12,0x22,
	0x31,0x13,0x55,
	0x31,0x14,0x05,
	0x31,0x35,0x00,
	0x32,0xf0,0x01,
	0x32,0x90,0x01,
	0x32,0x91,0x80,
	0x32,0x96,0x01,
	0x32,0x97,0x73,
  0x32,0x50,0xC0,  //CA
  0x32,0x51,0x01,  //Top boundary of R/G
  0x32,0x52,0x4F,  // 
  0x32,0x53,0x86,  //Bottom boundary of R/G
  0x32,0x54,0x00,  //Top boundary of B/G
  0x32,0x55,0xC7,  // 
  0x32,0x56,0x75,  //Bottom boundary of B/G
  0x32,0x57,0x46,
  0x32,0x58,0x0A,
  0x32,0x9B,0x31,  
  0x32,0xA1,0x00,  
  0x32,0xA2,0xE8,  
  0x32,0xA3,0x01,  
  0x32,0xA4,0xa8,  
  0x32,0xA5,0x01,  
  0x32,0xA6,0x61,  
  0x32,0xA7,0x01,  
  0x32,0xA8,0xE0, 
  
  0x32,0x10,0x03, //LSC
  0x32,0x11,0x03,
  0x32,0x12,0x03,
  0x32,0x13,0x03,
  0x32,0x14,0x01,
  0x32,0x15,0x01,
  0x32,0x16,0x01,
  0x32,0x17,0x01,
  0x32,0x18,0x01,
  0x32,0x19,0x01,
  0x32,0x1A,0x01,
  0x32,0x1B,0x01,       
  0x32,0x1C,0x00,       
  0x32,0x1D,0x00,       
  0x32,0x1E,0x00,       
  0x32,0x1F,0x00,
  0x32,0x32,0xC6,
  
	0x32,0x70,0x00,  //[Gamma_DXWY] 
  0x32,0x71,0x0A, 
  0x32,0x72,0x14, 
  0x32,0x73,0x28, 
  0x32,0x74,0x3B, 
  0x32,0x75,0x4C, 
  0x32,0x76,0x6B, 
  0x32,0x77,0x86, 
  0x32,0x78,0x9D, 
  0x32,0x79,0xB0, 
  0x32,0x7A,0xCF, 
  0x32,0x7B,0xE1, 
  0x32,0x7C,0xEB, 
  0x32,0x7D,0xEF, 
  0x32,0x7E,0xF8, 
  
  0x32,0xB0,0x55,  //AE win
  0x32,0xB1,0x69,  //AE win
  0x32,0xB2,0xaa,  //AE win
  0x32,0xB3,0x55,  //AE win

	0x33,0x02,0x00,           
	0x33,0x03,0x4C,           
	0x33,0x04,0x00,           
	0x33,0x05,0x96,           
	0x33,0x06,0x00,           
	0x33,0x07,0x1D,           
	0x33,0x08,0x07,           
	0x33,0x09,0xC0,           
	0x33,0x0a,0x06,           
	0x33,0x0b,0xD6,           
	0x33,0x0c,0x01,           
	0x33,0x0d,0x6A,           
	0x33,0x0e,0x01,           
	0x33,0x0f,0x61,           
	0x33,0x10,0x06,           
	0x33,0x11,0xEA,           
	0x33,0x12,0x07,           
	0x33,0x13,0xB5,           
  0x33,0x26,0x02,
	0x32,0xf6,0x0f,
	0x32,0xf9,0x42,
	0x32,0xfa,0x24,
	0x33,0x25,0x4a,
	0x33,0x30,0x00,
	0x33,0x31,0x09,
	
//	0x33,0x32,0xAf,
	0x33,0x32,0x8f,		//线条过度，锐利，值越少线条的纹理越不明显，
	
	0x33,0x38,0x30,
	0x33,0x39,0x84,
	0x33,0x3a,0x48,
	0x33,0x3f,0x07,


  0x33,0x60,0x0b, //IQ_Param_Sel_0
  0x33,0x61,0x18, //IQ_Param_Sel_1
  0x33,0x62,0x1f, //IQ_Param_Sel_2
  0x33,0x63,0x37, //IQ_Auto_Control
  0x33,0x64,0x80, // CC_Ctrl_0 
  0x33,0x65,0x78, // CC_Ctrl_1 
  0x33,0x66,0x70, // CC_Ctrl_2 
  0x33,0x67,0x60, // CC_Ctrl_3 
//  0x33,0x68,0x84, //Edge_Enhance_L_0
  0x33,0x68,0x80, //Edge_Enhance_L_0
//  0x33,0x69,0x80, //Edge_Enhance_L_1
  0x33,0x69,0x78, //Edge_Enhance_L_1
  0x33,0x6A,0x70, //Edge_Enhance_L_2
  0x33,0x6B,0x60, //Edge_Enhance_L_3
  0x33,0x6C,0x00, //EE_Weight_H
  0x33,0x6D,0x20, //NR_DPC_Ratio_0
  0x33,0x6E,0x1C, //NR_DPC_Ratio_1
  0x33,0x6F,0x16, //NR_DPC_Ratio_2
  0x33,0x70,0x0E, //NR_DPC_Ratio_3
  0x33,0x71,0x32,  // NR_Weight_0 
  0x33,0x72,0x38, //NR_Weight_1
  0x33,0x73,0x3F, //NR_Weight_2
  0x33,0x74,0x3F, //NR_Weight_3
  0x33,0x75,0x0c, //NR_Thr_0
  0x33,0x76,0x10, //NR_Thr_1
  0x33,0x77,0x14, //NR_Thr_2
  0x33,0x78,0x1a, //NR_Thr_3
  0x33,0x8A,0x34, //GFilter_Ctrl_0
  0x33,0x8B,0x7F, //GF_Dark_Level_0
  0x33,0x8C,0x10, //GF_Comp_Max_0
  0x33,0x8D,0x23, //GFilter_Ctrl_1
  0x33,0x8E,0x7F, //GF_Dark_Level_1
  0x33,0x8F,0x14, //GF_Comp_Max_1
	0x33,0x75,0x10,
	0x33,0x76,0x14,
	0x33,0x77,0x18,
	0x33,0x78,0x20,
	0x30,0x12,0x02,
	0x30,0x13,0xd0,
	0x30,0x69,0x01,
	0x30,0x6a,0x02,
	
            
 
0x32,0xBF,0x60, 
0x32,0xC0,0x6A, 
0x32,0xC1,0x6A, 
0x32,0xC2,0x6A, 
0x32,0xC3,0x00, 
0x32,0xC4,0x2B, 
0x32,0xC5,0x15, 
0x32,0xC6,0x21, 
0x32,0xC7,0x00, 
0x32,0xC8,0x93, 
0x32,0xC9,0x6A, 
0x32,0xCA,0x7F, 
0x32,0xCB,0x7F, 
0x32,0xCC,0x8B, 
0x32,0xCD,0x8B, 
0x32,0xDB,0x72, 
0x32,0x00,0x3E, 
0x32,0x01,0x0F, 
0x30,0x28,0x03, 
0x30,0x29,0x00, 
0x30,0x2A,0x00, 
0x30,0x22,0x24, 
0x30,0x23,0x24, 
0x30,0x02,0x00, 
0x30,0x03,0x04, 
0x30,0x04,0x00, 
0x30,0x05,0x04, 
0x30,0x06,0x05, 
0x30,0x07,0x03, 
0x30,0x08,0x02, 
0x30,0x09,0xD3, 


0x30,0x0A,0x0A, 
0x30,0x0B,0x9D, 
0x30,0x0C,0x02, 
0x30,0x0D,0xE0, 


0x30,0x0E,0x05, 
0x30,0x0F,0x00, 
0x30,0x10,0x02, 
0x30,0x11,0xD0, 
0x32,0xBB,0x87, 	

//=======light level setting====step to set all reg====
//===光线偏暗=====

0x32,0xB8,0x3F, 
0x32,0xB9,0x31, 
0x32,0xBC,0x38, 
0x32,0xBD,0x3C, 
0x32,0xBE,0x34, 

/*
0x32,0xB8,0x44, 
0x32,0xB9,0x34, 
0x32,0xBC,0x3c, 
0x32,0xBD,0x40, 
0x32,0xBE,0x38, */
//=======end light level==========

0x32,0x01,0x3F, 
0x30,0x21,0x06, 
0x30,0x60,0x01, 


#endif
#if 0
//=======code 20~30fps 40mmclk  75mpck=====
	{0x31,0x09,0x04},
	{0x30,0x40,0x04},
	{0x30,0x41,0x02},
	{0x30,0x42,0xff},
	{0x30,0x43,0x08},
	{0x30,0x52,0xe0},
	{0x30,0x53,0x0E},
	{0x30,0x5f,0x33},
	{0x31,0x00,0x07},
	{0x31,0x06,0x03},
	{0x31,0x05,0x01},
	{0x31,0x08,0x05},
	{0x31,0x10,0x22},
	{0x31,0x11,0x57},
	{0x31,0x12,0x22},
	{0x31,0x13,0x55},
	{0x31,0x14,0x05},
	{0x31,0x35,0x00},
	{0x32,0xf0,0x01},
	{0x32,0x90,0x01},
	{0x32,0x91,0x80},
	{0x32,0x96,0x01},
	{0x32,0x97,0x73},
  {0x32,0x50,0xC0},  //CA
  {0x32,0x51,0x01},  //Top boundary of R/G
  {0x32,0x52,0x4F},  // 
  {0x32,0x53,0x86},  //Bottom boundary of R/G
  {0x32,0x54,0x00},  //Top boundary of B/G
  {0x32,0x55,0xC7},  // 
  {0x32,0x56,0x75},  //Bottom boundary of B/G
  {0x32,0x57,0x46},
  {0x32,0x58,0x0A},
  {0x32,0x9B,0x31},  
  {0x32,0xA1,0x00},  
  {0x32,0xA2,0xE8},  
  {0x32,0xA3,0x01},  
  {0x32,0xA4,0xa8},  
  {0x32,0xA5,0x01},  
  {0x32,0xA6,0x61},  
  {0x32,0xA7,0x01},  
  {0x32,0xA8,0xE0}, 
  
  {0x32,0x10,0x03}, //LSC
  {0x32,0x11,0x03},
  {0x32,0x12,0x03},
  {0x32,0x13,0x03},
  {0x32,0x14,0x01},
  {0x32,0x15,0x01},
  {0x32,0x16,0x01},
  {0x32,0x17,0x01},
  {0x32,0x18,0x01},
  {0x32,0x19,0x01},
  {0x32,0x1A,0x01},
  {0x32,0x1B,0x01},       
  {0x32,0x1C,0x00},       
  {0x32,0x1D,0x00},       
  {0x32,0x1E,0x00},       
  {0x32,0x1F,0x00},
  {0x32,0x32,0xC6},
  
	{0x32,0x70,0x00},  //[Gamma_DXWY] 
  {0x32,0x71,0x0A}, 
  {0x32,0x72,0x14}, 
  {0x32,0x73,0x28}, 
  {0x32,0x74,0x3B}, 
  {0x32,0x75,0x4C}, 
  {0x32,0x76,0x6B}, 
  {0x32,0x77,0x86}, 
  {0x32,0x78,0x9D}, 
  {0x32,0x79,0xB0}, 
  {0x32,0x7A,0xCF}, 
  {0x32,0x7B,0xE1}, 
  {0x32,0x7C,0xEB}, 
  {0x32,0x7D,0xEF}, 
  {0x32,0x7E,0xF8}, 
  
  {0x32,0xB0,0x55},  //AE win
  {0x32,0xB1,0x69},  //AE win
  {0x32,0xB2,0xaa},  //AE win
  {0x32,0xB3,0x55},  //AE win

	{0x33,0x02,0x00},           
	{0x33,0x03,0x4C},           
	{0x33,0x04,0x00},           
	{0x33,0x05,0x96},           
	{0x33,0x06,0x00},           
	{0x33,0x07,0x1D},           
	{0x33,0x08,0x07},           
	{0x33,0x09,0xC0},           
	{0x33,0x0a,0x06},           
	{0x33,0x0b,0xD6},           
	{0x33,0x0c,0x01},           
	{0x33,0x0d,0x6A},           
	{0x33,0x0e,0x01},           
	{0x33,0x0f,0x61},           
	{0x33,0x10,0x06},           
	{0x33,0x11,0xEA},           
	{0x33,0x12,0x07},           
	{0x33,0x13,0xB5},           
  {0x33,0x26,0x02},
	{0x32,0xf6,0x0f},
	{0x32,0xf9,0x42},
	{0x32,0xfa,0x24},
	{0x33,0x25,0x4a},
	{0x33,0x30,0x00},
	{0x33,0x31,0x09},
	
//	0x33,0x32,0xAf,
	{0x33,0x32,0x4f},	//0x8f	//线条过度，锐利，值越少线条的纹理越不明显，
	
	{0x33,0x38,0x30},
	{0x33,0x39,0x84},
	{0x33,0x3a,0x48},
	{0x33,0x3f,0x07},


  {0x33,0x60,0x0b}, //IQ_Param_Sel_0
  {0x33,0x61,0x18}, //IQ_Param_Sel_1
  {0x33,0x62,0x1f}, //IQ_Param_Sel_2
  {0x33,0x63,0x37}, //IQ_Auto_Control
  {0x33,0x64,0x80}, // CC_Ctrl_0 
  {0x33,0x65,0x78}, // CC_Ctrl_1 
  {0x33,0x66,0x70}, // CC_Ctrl_2 
  {0x33,0x67,0x60}, // CC_Ctrl_3 
//  {0x33,0x68,0x84}, //Edge_Enhance_L_0
  {0x33,0x68,0x80}, //Edge_Enhance_L_0
//  {0x33,0x69,0x80}, //Edge_Enhance_L_1
  {0x33,0x69,0x78}, //Edge_Enhance_L_1
  {0x33,0x6A,0x70}, //Edge_Enhance_L_2
  {0x33,0x6B,0x60}, //Edge_Enhance_L_3
  {0x33,0x6C,0x00}, //EE_Weight_H
  {0x33,0x6D,0x20}, //NR_DPC_Ratio_0
  {0x33,0x6E,0x1C}, //NR_DPC_Ratio_1
  {0x33,0x6F,0x16}, //NR_DPC_Ratio_2
  {0x33,0x70,0x0E}, //NR_DPC_Ratio_3
  {0x33,0x71,0x32},  // NR_Weight_0 
  {0x33,0x72,0x38}, //NR_Weight_1
  {0x33,0x73,0x3F}, //NR_Weight_2
  {0x33,0x74,0x3F}, //NR_Weight_3
  {0x33,0x75,0x0c}, //NR_Thr_0
  {0x33,0x76,0x10}, //NR_Thr_1
  {0x33,0x77,0x14}, //NR_Thr_2
  {0x33,0x78,0x1a}, //NR_Thr_3
  {0x33,0x8A,0x34}, //GFilter_Ctrl_0
  {0x33,0x8B,0x7F}, //GF_Dark_Level_0
  {0x33,0x8C,0x10}, //GF_Comp_Max_0
  {0x33,0x8D,0x23}, //GFilter_Ctrl_1
  {0x33,0x8E,0x7F}, //GF_Dark_Level_1
  {0x33,0x8F,0x14}, //GF_Comp_Max_1
	{0x33,0x75,0x10},
	{0x33,0x76,0x14},
	{0x33,0x77,0x18},
	{0x33,0x78,0x20},
	{0x30,0x12,0x02},
	{0x30,0x13,0xd0},
	{0x30,0x69,0x01},
	{0x30,0x6a,0x02},


{0x32,0xBF,0x60}, 
{0x32,0xC0,0x64}, 
{0x32,0xC1,0x64}, 
{0x32,0xC2,0x64}, 
{0x32,0xC3,0x00}, 
{0x32,0xC4,0x2B}, 
{0x32,0xC5,0x13}, 
{0x32,0xC6,0x1F}, 
{0x32,0xC7,0x00}, 
{0x32,0xC8,0xDD}, 
{0x32,0xC9,0x64}, 
{0x32,0xCA,0x77}, 
{0x32,0xCB,0x77}, 
{0x32,0xCC,0x83}, 
{0x32,0xCD,0x83}, 
{0x32,0xDB,0x7B}, 
{0x32,0x00,0x3E}, 
{0x32,0x01,0x0F}, 
{0x30,0x28,0x0E}, 
{0x30,0x29,0x10}, 
{0x30,0x2A,0x04}, 
{0x30,0x22,0x24}, 
{0x30,0x23,0x24}, 
{0x30,0x02,0x00}, 
{0x30,0x03,0x04}, 
{0x30,0x04,0x00}, 
{0x30,0x05,0x04}, 
{0x30,0x06,0x05}, 
{0x30,0x07,0x03}, 
{0x30,0x08,0x02}, 
{0x30,0x09,0xD3}, 
{0x30,0x0A,0x06}, 
{0x30,0x0B,0xA2}, 
{0x30,0x0C,0x02}, 
{0x30,0x0D,0xE0}, 
{0x30,0x0E,0x05}, 
{0x30,0x0F,0x00}, 
{0x30,0x10,0x02}, 
{0x30,0x11,0xD0}, 

{0x32,0xBB,0x87}, 	

//=======light level setting====step to set all reg====
//===光线偏暗=====

{0x32,0xB8,0x3F}, 
{0x32,0xB9,0x31}, 
{0x32,0xBC,0x38}, 
{0x32,0xBD,0x3C}, 
{0x32,0xBE,0x34}, 

/*
{0x32,0xB8,0x44}, 
{0x32,0xB9,0x34}, 
{0x32,0xBC,0x3c}, 
{0x32,0xBD,0x40}, 
{0x32,0xBE,0x38}, */
//=======end light level==========

{0x32,0x01,0x3F}, 
{0x30,0x21,0x06}, 
{0x30,0x60,0x01}, 

#endif
#if 1
//=======code 25~30fps 40mmclk  75mpck=====
	{0x31,0x09,0x04},
	{0x30,0x40,0x04},
	{0x30,0x41,0x02},
	{0x30,0x42,0xff},
	{0x30,0x43,0x08},
	{0x30,0x52,0xe0},
	{0x30,0x53,0x0E},
	{0x30,0x5f,0x33},
	{0x31,0x00,0x07},
	{0x31,0x06,0x03},
	{0x31,0x05,0x01},
	{0x31,0x08,0x05},
	{0x31,0x10,0x22},
	{0x31,0x11,0x57},
	{0x31,0x12,0x22},
	{0x31,0x13,0x55},
	{0x31,0x14,0x05},
	{0x31,0x35,0x00},
	{0x32,0xf0,0x01},
	{0x32,0x90,0x01},
	{0x32,0x91,0x80},
	{0x32,0x96,0x01},
	{0x32,0x97,0x73},
  {0x32,0x50,0xC0},  //CA
  {0x32,0x51,0x01},  //Top boundary of R/G
  {0x32,0x52,0x4F},  // 
  {0x32,0x53,0x86},  //Bottom boundary of R/G
  {0x32,0x54,0x00},  //Top boundary of B/G
  {0x32,0x55,0xC7},  // 
  {0x32,0x56,0x75},  //Bottom boundary of B/G
  {0x32,0x57,0x46},
  {0x32,0x58,0x0A},
  {0x32,0x9B,0x31},  
  {0x32,0xA1,0x00},  
  {0x32,0xA2,0xE8},  
  {0x32,0xA3,0x01},  
  {0x32,0xA4,0xa8},  
  {0x32,0xA5,0x01},  
  {0x32,0xA6,0x61},  
  {0x32,0xA7,0x01},  
  {0x32,0xA8,0xE0}, 
  
  {0x32,0x10,0x03}, //LSC
  {0x32,0x11,0x03},
  {0x32,0x12,0x03},
  {0x32,0x13,0x03},
  {0x32,0x14,0x01},
  {0x32,0x15,0x01},
  {0x32,0x16,0x01},
  {0x32,0x17,0x01},
  {0x32,0x18,0x01},
  {0x32,0x19,0x01},
  {0x32,0x1A,0x01},
  {0x32,0x1B,0x01},       
  {0x32,0x1C,0x00},       
  {0x32,0x1D,0x00},       
  {0x32,0x1E,0x00},       
  {0x32,0x1F,0x00},
  {0x32,0x32,0xC6},
  
	{0x32,0x70,0x00},  //[Gamma_DXWY] 
  {0x32,0x71,0x0A}, 
  {0x32,0x72,0x14}, 
  {0x32,0x73,0x28}, 
  {0x32,0x74,0x3B}, 
  {0x32,0x75,0x4C}, 
  {0x32,0x76,0x6B}, 
  {0x32,0x77,0x86}, 
  {0x32,0x78,0x9D}, 
  {0x32,0x79,0xB0}, 
  {0x32,0x7A,0xCF}, 
  {0x32,0x7B,0xE1}, 
  {0x32,0x7C,0xEB}, 
  {0x32,0x7D,0xEF}, 
  {0x32,0x7E,0xF8}, 
  
  {0x32,0xB0,0x55},  //AE win
  {0x32,0xB1,0x69},  //AE win
  {0x32,0xB2,0xaa},  //AE win
  {0x32,0xB3,0x55},  //AE win

	{0x33,0x02,0x00},           
	{0x33,0x03,0x4C},           
	{0x33,0x04,0x00},           
	{0x33,0x05,0x96},           
	{0x33,0x06,0x00},           
	{0x33,0x07,0x1D},           
	{0x33,0x08,0x07},           
	{0x33,0x09,0xC0},           
	{0x33,0x0a,0x06},           
	{0x33,0x0b,0xD6},           
	{0x33,0x0c,0x01},           
	{0x33,0x0d,0x6A},           
	{0x33,0x0e,0x01},           
	{0x33,0x0f,0x61},           
	{0x33,0x10,0x06},           
	{0x33,0x11,0xEA},           
	{0x33,0x12,0x07},           
	{0x33,0x13,0xB5},           
  {0x33,0x26,0x02},
	{0x32,0xf6,0x0f},
	{0x32,0xf9,0x42},
	{0x32,0xfa,0x24},
	{0x33,0x25,0x4a},
	{0x33,0x30,0x00},
	{0x33,0x31,0x09},
	
//	0x33,0x32,0xAf,
	{0x33,0x32,0x4f},//0x8f		//??ì?1y?è￡?è?à?￡??μ??éù??ì?μ???àí??2??÷??￡?
	
	{0x33,0x38,0x30},
	{0x33,0x39,0x84},
	{0x33,0x3a,0x48},
	{0x33,0x3f,0x07},


  {0x33,0x60,0x0b}, //IQ_Param_Sel_0
  {0x33,0x61,0x18}, //IQ_Param_Sel_1
  {0x33,0x62,0x1f}, //IQ_Param_Sel_2
  {0x33,0x63,0x37}, //IQ_Auto_Control
  {0x33,0x64,0x80}, // CC_Ctrl_0 
  {0x33,0x65,0x78}, // CC_Ctrl_1 
  {0x33,0x66,0x70}, // CC_Ctrl_2 
  {0x33,0x67,0x60}, // CC_Ctrl_3 
//  {0x33,0x68,0x84}, //Edge_Enhance_L_0
  {0x33,0x68,0x80}, //Edge_Enhance_L_0
//  {0x33,0x69,0x80}, //Edge_Enhance_L_1
  {0x33,0x69,0x78}, //Edge_Enhance_L_1
  {0x33,0x6A,0x70}, //Edge_Enhance_L_2
  {0x33,0x6B,0x60}, //Edge_Enhance_L_3
  {0x33,0x6C,0x00}, //EE_Weight_H
  {0x33,0x6D,0x20}, //NR_DPC_Ratio_0
  {0x33,0x6E,0x1C}, //NR_DPC_Ratio_1
  {0x33,0x6F,0x16}, //NR_DPC_Ratio_2
  {0x33,0x70,0x0E}, //NR_DPC_Ratio_3
  {0x33,0x71,0x32},  // NR_Weight_0 
  {0x33,0x72,0x38}, //NR_Weight_1
  {0x33,0x73,0x3F}, //NR_Weight_2
  {0x33,0x74,0x3F}, //NR_Weight_3
  {0x33,0x75,0x0c}, //NR_Thr_0
  {0x33,0x76,0x10}, //NR_Thr_1
  {0x33,0x77,0x14}, //NR_Thr_2
  {0x33,0x78,0x1a}, //NR_Thr_3
  {0x33,0x8A,0x34}, //GFilter_Ctrl_0
  {0x33,0x8B,0x7F}, //GF_Dark_Level_0
  {0x33,0x8C,0x10}, //GF_Comp_Max_0
  {0x33,0x8D,0x23}, //GFilter_Ctrl_1
  {0x33,0x8E,0x7F}, //GF_Dark_Level_1
  {0x33,0x8F,0x14}, //GF_Comp_Max_1
	{0x33,0x75,0x10},
	{0x33,0x76,0x14},
	{0x33,0x77,0x18},
	{0x33,0x78,0x20},
	{0x30,0x12,0x02},
	{0x30,0x13,0xd0},
	{0x30,0x69,0x01},
	{0x30,0x6a,0x02},


//[YUYV_1280x720_25.00_30.00_Fps]

//[50Hz] 
{0x32, 0xBF, 0x60}, 
{0x32, 0xC0, 0x60}, 
{0x32, 0xC1, 0x60}, 
{0x32, 0xC2, 0x60}, 
{0x32, 0xC3, 0x00}, 
{0x32, 0xC4, 0x2B}, 
{0x32, 0xC5, 0x13}, 
{0x32, 0xC6, 0x1F}, 
{0x32, 0xC7, 0x00}, 
{0x32, 0xC8, 0xE2}, 
{0x32, 0xC9, 0x60}, 
{0x32, 0xCA, 0x73}, 
{0x32, 0xCB, 0x73}, 
{0x32, 0xCC, 0x7F}, 
{0x32, 0xCD, 0x7F}, 
{0x32, 0xDB, 0x7C}, 

/*[60Hz]     
             
{0x32, 0xBF, 0x60}, 
{0x32, 0xC0, 0x63}, 
{0x32, 0xC1, 0x63}, 
{0x32, 0xC2, 0x63}, 
{0x32, 0xC3, 0x00}, 
{0x32, 0xC4, 0x2B}, 
{0x32, 0xC5, 0x13}, 
{0x32, 0xC6, 0x1F}, 
{0x32, 0xC7, 0x00}, 
{0x32, 0xC8, 0xBC}, 
{0x32, 0xC9, 0x63}, 
{0x32, 0xCA, 0x76}, 
{0x32, 0xCB, 0x76}, 
{0x32, 0xCC, 0x82}, 
{0x32, 0xCD, 0x82}, 
{0x32, 0xDB, 0x77},*/

{0x32, 0x00, 0x3E}, 
{0x32, 0x01, 0x0F}, 
{0x30, 0x28, 0x0E}, 
{0x30, 0x29, 0x10}, 
{0x30, 0x2A, 0x04}, 
{0x30, 0x22, 0x24}, 
{0x30, 0x23, 0x24}, 
{0x30, 0x02, 0x00}, 
{0x30, 0x03, 0x04}, 
{0x30, 0x04, 0x00}, 
{0x30, 0x05, 0x04}, 
{0x30, 0x06, 0x05}, 
{0x30, 0x07, 0x03}, 
{0x30, 0x08, 0x02}, 
{0x30, 0x09, 0xD3}, 
{0x30, 0x0A, 0x06}, 
{0x30, 0x0B, 0x7C}, 
{0x30, 0x0C, 0x02}, 
{0x30, 0x0D, 0xF1}, 
{0x30, 0x0E, 0x05}, 
{0x30, 0x0F, 0x00}, 
{0x30, 0x10, 0x02}, 
{0x30, 0x11, 0xD0}, 

{0x32,0xBB,0xa7}, 
//=======light level setting====step to set all reg====


{0x32,0xB8,0x3F}, 
{0x32,0xB9,0x31}, 
{0x32,0xBC,0x38}, 
{0x32,0xBD,0x3C}, 
{0x32,0xBE,0x34}, 

/*
{0x32,0xB8,0x44}, 
{0x32,0xB9,0x34}, 
{0x32,0xBC,0x3c}, 
{0x32,0xBD,0x40}, 
{0x32,0xBE,0x38},*/
//=======end light level==========

{0x32, 0x01, 0x3F}, 
{0x30, 0x21, 0x06}, 
{0x30, 0x60, 0x01}, 
#endif
};



/*******************************************************************************
* Function Name  : sensor_Init
* Description    : initialize the sensor
* Input          : None
* Output         : None
* Return         : None
*******************************************************************************/
u8 sensor_Init(void)
{
     u32 i;
     u8 j;
     u8 u8Buf[3];
	 u8 SensorId;
     
	 #if(SYS_CLK == 120000000)
		#if(USER_CONFIG == CONFIG_AX3251_K6000)
			#if(DEFAULT_TVOUT_EN == 1) 
			sensor_ClockInit(30000000);
			#else
			sensor_ClockInit(40000000);
			#endif
		#else
		sensor_ClockInit(40000000);
		#endif
	 #elif(SYS_CLK == 48000000)
		sensor_ClockInit(24000000);
	 #endif

     u8SensorwriteID = NT99141_I2C_WRITE_ADDR;
     u8SensorreadID = NT99141_I2C_READ_ADDR;
     u8Addrbytnum = 2;
     u8Databytnum = 1;

	//=======close sensor power ========
	#if (I2C_MAP == I2C_MAP_SW2)			//select software simulate I2C signal
	bI2CBusy_Flag=1;					//set dc check unuse
	bSFBusy_Flag=1;						//set tf card check unuse
	REG32(PMAP_CFG0)  &= ~(1<<14);		//SPI0_MAP0 not mapping to io
	REG32(PMAP_CFG0)  &= ~(1<<7);		// uart not map to io 
	I2C_SCL_SDA_OUT();
	I2C_SCL_LOW();
	I2C_SDA_LOW();
	#endif

	REG32(SYS_CON) = 0x932B;			//SPEC request value
	REG32(LDO_ACON) &= ~(0xf << 4);		//close senosr ldo power

	#if	(USER_CONFIG==CONFIG_AX3251_K6000)		
	Delay_MS(250);		//rc reset need delay, IO reset not do it
	#endif

	#if (I2C_MAP == I2C_MAP_SW2)	//select software simulate I2C signal
	bI2CBusy_Flag=0;
	bSFBusy_Flag=0;
	#endif
	//======end close sensor power=======

	//====sensor ldo open======
	REG32(LDO_ACON) |= (7<<4);   //sensor 3bit 111:3.3v,110:3.2v .... 000:2.6v
	REG32(LDO_ACON) |= (1<<7);   //sensor ldo enable
	Delay_MS(50);
	//===end sensor ldo open====

     i2c_Init(NT99141_I2C_BAUD, NT99141_I2C_WRITE_ADDR,NT99141_I2C_READ_ADDR);
     CLRB(REG32(PCON0), 23);							//csi Clock Enable Bit

     //SENSOR_PIN_CONF();
     //SENSOR_NORMAL();
    // SENSOR_POWERDN();
     SENSOR_NRESET();
     Delay_MS(10);
     SENSOR_RESET();
     Delay_MS(10);
     SENSOR_NRESET();
   //  SENSOR_NORMAL();
     Delay_MS(10);

     i2c_SendStop();
     SensorId=u8sensor_ReadID();
     if(0x14 != SensorId)
     {
	   	sensor_I2C_port_release();
		deg_Printf("SensorId=%x\n",SensorId);
		return 1;
     }

     for(i=0; i<sizeof(NT99141InitTable_1280_720)/3; i++)
     {
          for(j=0; j<(u8Addrbytnum+u8Databytnum); j++) 
         {
             u8Buf[j] = NT99141InitTable_1280_720[i][j];
         }   
         Sensor_WriteRegister(u8Buf,u8Addrbytnum,u8Databytnum);
         Delay_MS(1);
     }

	sensor_I2C_port_release();
	deg_Printf("SensorId=%x\n",SensorId);
	return 0;
}

/*******************************************************************************
* Function Name  : u8sensor_ReadID
* Description    : read sensor chip ID
* Input          : None
* Output         : None
* Return         : sensor chip ID
*******************************************************************************/
u8 u8sensor_ReadID(void)
{
    u8 u8NT99141Id;  
    u8 u8Buf[3]; 
    
    u8Buf[0] = (NT99141_CHIP_ID_ADDR >> 8) & 0xff;
    u8Buf[1] = NT99141_CHIP_ID_ADDR & 0xff;
    u8NT99141Id = (u8)Sensor_ReadRegister(u8Buf,u8Addrbytnum,u8Databytnum);  
    //deg_Printf("u8NT99141Id=%x\n",u8NT99141Id);
    return  u8NT99141Id;               
}



//=====flag: 0 is rotate 0',  1 is rotate 180'  flip====
void sensor_rotate(u8 flag)
{
	i2c_Init(NT99141_I2C_BAUD, NT99141_I2C_WRITE_ADDR,NT99141_I2C_READ_ADDR);
/*
	if(0 == flag)
	{
		u8 rot_buf[3];
		rot_buf[0] = 0x30;
		rot_buf[1] = 0x22;
		rot_buf[2] = 0x24;
		Sensor_WriteRegister(rot_buf,2,1);
//		deg_Printf("sensor_rotate 0 \n");
	}
	else if(1 == flag)
	{
		u8 rot_buf[3];
		rot_buf[0] = 0x30;
		rot_buf[1] = 0x22;
		rot_buf[2] = 0x27;
		Sensor_WriteRegister(rot_buf,2,1);
//		deg_Printf("sensor_rotate 180 \n");
	}
*/
	if(0 == flag)
	{
		u8 rot_buf[3];
		rot_buf[0] = 0x30;
		rot_buf[1] = 0x22;
		rot_buf[2] = 0x27;
		Sensor_WriteRegister(rot_buf,2,1);
//		deg_Printf("sensor_rotate 0 \n");
	}
	else if(1 == flag)
	{

		u8 rot_buf[3];
		rot_buf[0] = 0x30;
		rot_buf[1] = 0x22;
		rot_buf[2] = 0x24;
		Sensor_WriteRegister(rot_buf,2,1);
//		deg_Printf("sensor_rotate 180 \n");
	}
	
	sensor_I2C_port_release();
}


#endif
